package me.m56738.easyarmorstands.inventory;

import me.m56738.easyarmorstands.capability.invulnerability.InvulnerabilityCapability;
import me.m56738.easyarmorstands.capability.item.ItemType;
import net.kyori.adventure.text.Component;
import net.kyori.adventure.text.format.NamedTextColor;
import org.bukkit.entity.ArmorStand;

import java.util.Arrays;

public class ToggleInvulnerabilitySlot extends ToggleSlot {
    private final SessionMenu menu;
    private final InvulnerabilityCapability invulnerabilityCapability;

    public ToggleInvulnerabilitySlot(SessionMenu menu, InvulnerabilityCapability invulnerabilityCapability) {
        super(
                menu,
                ItemType.GOLDEN_APPLE,
                Component.text("Toggle invulnerability", NamedTextColor.BLUE), Arrays.asList(
                        Component.text("Changes whether the", NamedTextColor.GRAY),
                        Component.text("armor stand is invulnerable", NamedTextColor.GRAY),
                        Component.text("and cannot be destroyed.", NamedTextColor.GRAY)
                )
        );
        this.menu = menu;
        this.invulnerabilityCapability = invulnerabilityCapability;
    }

    @Override
    protected Component getValue() {
        return invulnerabilityCapability.isInvulnerable(menu.getSession().getEntity())
                ? Component.text("invulnerable", NamedTextColor.GREEN)
                : Component.text("vulnerable", NamedTextColor.RED);
    }

    @Override
    protected void onClick() {
        ArmorStand entity = menu.getSession().getEntity();
        invulnerabilityCapability.setInvulnerable(entity, !invulnerabilityCapability.isInvulnerable(entity));
    }
}
